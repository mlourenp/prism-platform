apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namePrefix: prod-
namespace: prism-platform-prod

resources:
- ../base

patches:
- path: patches/resources.yaml
  target:
    kind: Deployment
- path: patches/replicas.yaml
  target:
    kind: Deployment
- path: patches/hpa.yaml
  target:
    kind: HorizontalPodAutoscaler

configMapGenerator:
- name: env-config
  literals:
  - ENVIRONMENT=production
  - DEBUG=false
  - LOG_LEVEL=INFO
  - METRICS_ENABLED=true
  - PROMETHEUS_ENDPOINT=http://prometheus:9090
  - GRAFANA_ENDPOINT=http://grafana:3000

secretGenerator:
- name: database-credentials
  literals:
  - url=postgresql://postgres:prod@db:5432/prism_platform_prod
